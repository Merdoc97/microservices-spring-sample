FROM flyway/flyway:8.4.4-alpine
COPY gateway-service/target/classes/db/migration /flyway/sql
ENV JDBC_URL=""
ENV SCHEMA=""
ENV POSTGRES_USER=""
ENV POSTGRES_PASSWORD=""
ENTRYPOINT [ "sh", "-c", "flyway -url=${JDBC_URL} -schemas=${SCHEMA} -user=${POSTGRES_USER} -password=${POSTGRES_PASSWORD} -connectRetries=2 migrate" ]
